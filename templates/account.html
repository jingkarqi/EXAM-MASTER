{% extends 'base.html' %}

{% block title %}账号管理 | ExamMaster{% endblock %}

{% block content %}
<section class="card account-card">
    <div class="card-title d-flex justify-content-between align-items-center flex-wrap gap-2">
        <div>
            <i class="fas fa-user-cog"></i> 账号管理
        </div>
        <a href="{{ url_for('user.personal_center') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> 返回我的
        </a>
    </div>
    <p class="card-subtitle">
        管理当前登录账号，更新用户名或密码。注册时间：{{ created_at or '未知' }}。
    </p>

    <div class="account-panels">
        <div class="account-panel">
            <h3 class="account-panel__title">
                <i class="fas fa-id-card"></i> 修改用户名
            </h3>
            <p class="account-panel__description">用户名用于登录及榜单展示，请保持唯一。</p>
            <form method="post" action="{{ url_for('user.update_username_settings') }}" class="account-form">
                <div class="form-group">
                    <label class="form-label">当前用户名</label>
                    <input type="text" class="form-control" value="{{ username }}" readonly>
                </div>
                <div class="form-group">
                    <label for="new_username" class="form-label">新用户名</label>
                    <input type="text" id="new_username" name="new_username" class="form-control" placeholder="不少于 3 个字符" minlength="3" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> 保存用户名
                </button>
            </form>
        </div>
        <div class="account-panel">
            <h3 class="account-panel__title">
                <i class="fas fa-lock"></i> 修改密码
            </h3>
            <p class="account-panel__description">建议使用至少 6 位且包含数字与字母的强密码。</p>
            <form method="post" action="{{ url_for('user.update_password_settings') }}" class="account-form">
                <div class="form-group">
                    <label for="current_password" class="form-label">当前密码</label>
                    <input type="password" id="current_password" name="current_password" class="form-control" required autocomplete="current-password">
                </div>
                <div class="form-group">
                    <label for="new_password" class="form-label">新密码</label>
                    <input type="password" id="new_password" name="new_password" class="form-control" minlength="6" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="confirm_password" class="form-label">确认新密码</label>
                    <input type="password" id="confirm_password" name="confirm_password" class="form-control" minlength="6" required autocomplete="new-password">
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check"></i> 更新密码
                </button>
            </form>
        </div>
    </div>
</section>
{% endblock %}
